<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè¨ˆã®çµŒæ¸ˆä¾¡å€¤ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
<meta name="description" content="æœˆæ¬¡æ±ºç®—ã®æ—©æœŸåŒ–ãƒ»è‡ªè¨ˆåŒ–ã«ã‚ˆã‚‹çµŒæ¸ˆçš„ãƒ¡ãƒªãƒƒãƒˆã‚’å®šé‡çš„ã«è©¦ç®—ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚">

<!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³è¨­å®š -->
<link rel="icon" href="favicon192192.png" sizes="192x192" />
<link rel="shortcut icon" href="favicon192192.png" />
<link rel="apple-touch-icon" href="favicon192192.png" />

<style>
  /* Ver 1.0 ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ  */
  :root{
    --bg:#f4f9fb;
    --card:#ffffff;
    --ink:#1e2a2d;
    --muted:#5a6a6d;
    --accent:#578899;       /* Ver 1.0 Main Color */
    --accent-soft:#7aa2b0;  /* Soft variation */
    --accent-pale:rgba(87,136,153,0.1);
    --danger:#b45309;
    --shadow:0 10px 30px rgba(35,80,90,.12);
    --border-color:#cbd5e1;
    --line:#e7eef3;
  }

  *{box-sizing:border-box;}

  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Yu Gothic","Noto Sans JP",sans-serif;
    background:var(--bg);
    color:var(--ink);
    line-height:1.6;
    -webkit-font-smoothing: antialiased;
  }

  .page{
    max-width:1120px;
    margin:0 auto;
    padding:16px 16px 10px;
  }

  /* Header */
  header{
    padding:12px 4px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }
  
  .logo-link {
    display: inline-block;
    line-height: 0;
    flex-shrink: 0;
  }
  
  .logo {
    height: 48px;
    width: auto;
    object-fit: contain;
    border-radius: 4px;
  }

  .header-content {
    flex: 1;
    min-width: 280px;
  }

  header h1{
    margin:0 0 6px;
    font-size:1.4rem;
    font-weight:700;
    letter-spacing:.04em;
    color: var(--ink);
    display:flex;
    align-items:center;
    gap:8px;
    flex-wrap:wrap;
  }
  header h1 span.badge{
    font-size:.75rem;
    padding:2px 8px;
    border-radius:999px;
    background:var(--accent-pale);
    color:var(--accent);
    border:1px solid rgba(87,136,153,.3);
  }
  header p.lead{
    margin:0;
    font-size:.88rem;
    color:var(--muted);
  }
  .note{
    margin:8px 0 16px;
    font-size:.8rem;
    color:var(--muted);
  }

  /* Layout */
  .layout{
    display:grid;
    grid-template-columns:minmax(0,1.05fr) minmax(0,1fr);
    gap:16px;
    align-items:flex-start;
  }

  /* Card Styles */
  .card{
    background:var(--card);
    border-radius:16px;
    box-shadow:var(--shadow);
    padding:16px 18px;
  }
  .card h2{
    margin:0 0 12px;
    font-size:1.05rem;
    display:flex;
    align-items:center;
    gap:8px;
    border-bottom: 1px dashed #e2e8f0;
    padding-bottom: 8px;
  }
  .card h2 span.tag{
    font-size:.7rem;
    padding:2px 8px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.5);
    color:#475569;
    background:#f1f5f9;
  }

  /* Form Elements */
  .field-group{
    display:flex;
    flex-direction:column;
    gap:16px;
  }
  .field{
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  label{
    font-size:.85rem;
    font-weight:600;
    display:flex;
    justify-content:space-between;
    align-items:baseline;
    color: var(--ink);
  }
  label span.unit{
    font-size:.75rem;
    color:var(--muted);
    font-weight:400;
  }
  .field small{
    font-size:.75rem;
    color:var(--muted);
    line-height:1.3;
  }

  /* Inputs */
  input[type="text"],
  input[type="number"]{
    width:100%;
    padding:8px 10px;
    border-radius:8px;
    border:1px solid var(--border-color);
    font-size:.95rem;
    font-family:inherit;
    background:#f9fafb;
    transition: all 0.2s ease;
    text-align: right; /* æ•°å€¤ã¯è¦‹ã‚„ã™ãå³å¯„ã› */
  }
  input:focus{
    outline:none;
    border-color:var(--accent);
    background:#ffffff;
    box-shadow:0 0 0 3px rgba(87,136,153,.15);
  }
  input::placeholder{
    color:#cbd5e1;
    text-align: left;
  }

  .field-row{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
  }
  .field-row-3{
    display:grid;
    grid-template-columns:1fr 1fr 1fr;
    gap:8px;
  }

  hr.divider{
    border:none;
    border-top:1px dashed #e2e8f0;
    margin:8px 0;
  }

  /* Buttons (Input Form) */
  .actions{
    margin-top:20px;
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:flex-end;
  }
  button{
    border:none;
    border-radius:999px;
    font-size:.85rem;
    font-weight:600;
    padding:10px 20px;
    cursor:pointer;
    font-family:inherit;
    transition:transform .1s, box-shadow .1s;
  }
  button:active{ transform:scale(0.98); }
  
  button.primary{
    background:linear-gradient(135deg,var(--accent),var(--accent-soft));
    color:#ffffff;
    box-shadow:0 4px 12px rgba(87,136,153,.4);
  }
  button.secondary{
    background:#e2e8f0;
    color:#475569;
  }
  
  /* Buttons (Result Actions) - New Simple Design */
  .btn-group {
    margin-top: 32px;
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
    padding-top: 24px;
    border-top: 1px dashed #e2e8f0;
  }
  .btn-simple {
    flex: 1;
    min-width: 140px;
    max-width: 240px;
    padding: 12px 0;
    border-radius: 8px;
    border: 1px solid rgba(87,136,153, 0.2);
    background: #f0f7fa; /* æ·¡ã„ãƒ–ãƒ«ãƒ¼ã‚°ãƒ¬ãƒ¼ */
    color: var(--accent);
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    box-shadow: 0 1px 2px rgba(0,0,0,0.03);
  }
  .btn-simple:hover {
    background: #e1f0f5;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(87,136,153, 0.1);
  }
  
  /* å°åˆ·ãƒœã‚¿ãƒ³: å¤ªã„ç·šã§å¼·èª¿ */
  .btn-print {
    border: 2px solid var(--accent);
    background: #ffffff;
    color: var(--accent);
  }
  .btn-print:hover {
    background: #f0f7fa;
  }


  /* Result Area */
  .result-main{
    text-align: center;
    padding: 10px 0 20px;
    border-bottom: 1px solid #f1f5f9;
    margin-bottom: 16px;
  }
  .result-total{
    font-size:1.8rem;
    font-weight:700;
    color: var(--accent);
    line-height:1.2;
  }
  .result-sub{
    font-size:.8rem;
    color:var(--muted);
    margin-top: 4px;
  }

  /* Chart */
  .chart{
    margin:0 0 16px;
    padding:16px 12px 4px;
    border-radius:12px;
    background:linear-gradient(to bottom, #ffffff, #f8fafc);
    border: 1px solid #e2e8f0;
    display:flex;
    align-items:flex-end;
    gap:8px;
    height:160px;
  }
  .chart-col{
    flex:1;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-end;
    height: 100%;
  }
  .chart-bar-wrapper {
    width: 100%;
    flex: 1;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    position: relative;
  }
  .chart-bar{
    width:70%;
    border-radius:6px 6px 0 0;
    background:var(--accent);
    opacity: 0.85;
    transition: height 0.6s cubic-bezier(0.22, 1, 0.36, 1);
    min-height: 4px;
    position: relative;
  }
  .chart-bar span.bar-val {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.7rem;
    font-weight: bold;
    white-space: nowrap;
    color: var(--muted);
    opacity: 0;
    animation: fadeIn 0.3s 0.4s forwards;
  }
  @keyframes fadeIn { to { opacity: 1; } }
  .chart-label{
    font-size:.65rem;
    color:#475569;
    text-align:center;
    line-height:1.2;
    height: 2.4em;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 6px;
  }

  /* Result Grid & Cards */
  .result-grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
  }
  .result-card{
    background:#f8fafc;
    border-radius:12px;
    padding:12px;
    border:1px solid #e2e8f0;
    cursor: pointer;
    transition: background 0.2s, transform 0.1s;
    position: relative;
  }
  .result-card:hover{
    background: #f1f5f9;
    border-color: var(--accent-soft);
  }
  .result-card:active{
    transform: scale(0.98);
  }
  
  .result-card::after {
    content: '?';
    position: absolute;
    top: 8px;
    right: 8px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent-pale);
    color: var(--accent);
    font-size: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }

  .result-card h3{
    margin:0 0 6px;
    font-size:.8rem;
    color: var(--muted);
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .result-card h3::before{
    content:'';
    display:block;
    width:4px;
    height:12px;
    background:var(--accent);
    border-radius:2px;
  }
  .result-card .val-main{
    font-size: 1rem;
    font-weight: 700;
    color: var(--ink);
  }
  .result-card .val-sub{
    font-size: 0.75rem;
    color: var(--muted);
  }

  /* Result Footer */
  .result-footer{
    margin-top:16px;
    padding-top:12px;
    border-top:1px dashed #cbd5e1;
    font-size:.8rem;
  }
  .result-footer-row{
    display: flex;
    justify-content: space-between;
    margin-bottom: 4px;
  }
  
  /* mini footer (CC) */
  .mk-mini{ text-align:center;font-size:12px;color:#7b8794;padding:10px 10px 14px;border-top:1px solid var(--line);margin-top:24px;white-space:nowrap;overflow-x:auto }
  .mk-mini a{color:inherit;text-decoration:underline}
  .mk-mini::-webkit-scrollbar{height:8px}
  .mk-mini::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:8px}

  /* Modal (Pop-up) */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(30, 42, 45, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
    padding: 20px;
  }
  .modal-overlay.active {
    opacity: 1;
    pointer-events: auto;
  }
  .modal-content {
    background: #fff;
    width: 100%;
    max-width: 500px;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    transform: translateY(20px);
    transition: transform 0.2s;
    max-height: 90vh;
    overflow-y: auto;
  }
  .modal-overlay.active .modal-content {
    transform: translateY(0);
  }
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    border-bottom: 1px solid #eee;
    padding-bottom: 12px;
  }
  .modal-title {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--accent);
  }
  .close-btn {
    background: #f1f5f9;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--muted);
  }
  .formula-box {
    background: #f8fafc;
    padding: 12px;
    border-radius: 8px;
    font-family: monospace;
    font-size: 0.9rem;
    color: var(--ink);
    margin-bottom: 16px;
    border: 1px solid #e2e8f0;
    white-space: pre-wrap;
    line-height: 1.5;
  }
  .modal-desc {
    font-size: 0.9rem;
    color: var(--ink);
    line-height: 1.6;
  }
  .modal-desc p { margin-bottom: 10px; }
  .modal-desc strong { color: var(--accent); }
  
  /* Toast Notification */
  .toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(30, 42, 45, 0.9);
    color: #fff;
    padding: 10px 20px;
    border-radius: 30px;
    font-size: 0.9rem;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    z-index: 2000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .toast.show {
    opacity: 1;
  }

  /* Responsive */
  @media (max-width:900px){
    .layout{ grid-template-columns:1fr; }
    .page{ padding:14px 12px 28px; }
    header { flex-direction: column; align-items: flex-start; }
    .logo-link { margin-bottom: 8px; }
  }
  @media (max-width:600px){
    .field-row, .result-grid { grid-template-columns:1fr; }
    input[type="text"], input[type="number"] { font-size: 16px; }
    .btn-group { flex-direction: column; }
    .btn-simple { width: 100%; max-width: none; }
  }
  
  /* Print Styles */
  @media print {
    body { background: #fff; color: #000; }
    .page { max-width: 100%; padding: 0; margin: 0; }
    header .header-content p { display: none; } /* ãƒªãƒ¼ãƒ‰æ–‡éš ã™ */
    #simForm, .actions, .btn-group, .note, footer { display: none !important; } /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã¨ãƒœã‚¿ãƒ³éš ã™ */
    .layout { display: block; }
    .card { box-shadow: none; border: none; padding: 0; }
    #resultCard { break-inside: avoid; }
    .result-main { padding-top: 0; border-bottom: 2px solid #000; }
    .chart { border: 1px solid #ccc; background: #fff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    .result-card { border: 1px solid #ccc; background: #fff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    .result-card::after { display: none; } /* ?ã‚¢ã‚¤ã‚³ãƒ³éš ã™ */
  }
</style>
</head>
<body>

<div class="page">
  <header>
    <!-- ãƒ­ã‚´è¡¨ç¤º -->
    <a class="logo-link" href="https://takatrp.github.io/tool-portal/" target="_blank" rel="noopener">
      <img src="ãƒ­ã‚´.jpg" alt="æ¾æœ¬ä¼šè¨ˆãƒ­ã‚´" class="logo"/>
    </a>
    <div class="header-content">
      <h1>
        ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè¨ˆ çµŒæ¸ˆä¾¡å€¤ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
        <span class="badge">Ver 3.0</span>
      </h1>
      <p class="lead">
        ã€Œè‡ªè¨ˆåŒ–ãƒ»æ—©æœŸåŒ–ã€ã®ãƒ¡ãƒªãƒƒãƒˆã‚’ã€ã€Œé‡‘é¡ï¼ˆå††ï¼‰ã€ã§å®šé‡çš„ã«è©¦ç®—ã—ã¾ã™ã€‚
      </p>
    </div>
  </header>

  <div class="layout">
    <!-- å…¥åŠ›ã‚¨ãƒªã‚¢ -->
    <form id="simForm" class="card" autocomplete="off">
      <h2>å‰ææ¡ä»¶ã®å…¥åŠ› <span class="tag">Input</span></h2>

      <div class="field-group">
        <!-- åŸºæœ¬æƒ…å ± -->
        <div class="field">
          <label for="sales">
            <span class="label-main">å¹´é–“å£²ä¸Šé«˜</span>
            <span class="unit">å††</span>
          </label>
          <!-- ã‚«ãƒ³ãƒç·¨é›†ç”¨ã« type="text" inputmode="numeric" ã‚’ä½¿ç”¨ -->
          <input id="sales" type="text" inputmode="numeric" placeholder="300,000,000" class="format-money">
        </div>

        <div class="field">
          <label for="marginBase">
            <span class="label-main">å¹³å¸¸æ™‚ã®ç²—åˆ©ç‡ï¼ˆé™ç•Œåˆ©ç›Šç‡ï¼‰</span>
            <span class="unit">ï¼…</span>
          </label>
          <input id="marginBase" type="number" min="0" max="100" step="0.1" placeholder="40.0">
        </div>

        <hr class="divider">

        <!-- CCC -->
        <div class="field">
          <label>CCCï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ã‚µã‚¤ã‚¯ãƒ«ï¼‰ <span class="unit">æ—¥</span></label>
          <div class="field-row">
            <div class="field">
                <small>ç¾çŠ¶</small>
                <input id="cccCurrent" type="number" placeholder="90">
            </div>
            <div class="field">
                <small>ç›®æ¨™</small>
                <input id="cccTarget" type="number" placeholder="60">
            </div>
          </div>
        </div>
        <div class="field">
          <label for="fundingRate">
            <span class="label-main">è³‡é‡‘èª¿é”ã‚³ã‚¹ãƒˆç‡</span>
            <span class="unit">ï¼…</span>
          </label>
          <input id="fundingRate" type="number" step="0.1" placeholder="2.5">
        </div>

        <hr class="divider">

        <!-- é€¸å¤±åˆ©ç›Š -->
        <div class="field">
          <label for="marginWorse">
            <span class="label-main">æ‚ªåŒ–æ™‚ã®ç²—åˆ©ç‡ï¼ˆæ”¾ç½®æ™‚ï¼‰</span>
            <span class="unit">ï¼…</span>
          </label>
          <input id="marginWorse" type="number" step="0.1" placeholder="35.0">
        </div>
        <div class="field">
          <label>ç•°å¸¸æ¤œçŸ¥ã¾ã§ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚° <span class="unit">ãƒ¶æœˆ</span></label>
          <div class="field-row">
            <div class="field">
                <small>å¹´1æ±ºç®—æ™‚</small>
                <input id="monthsWithout" type="number" placeholder="10">
            </div>
            <div class="field">
                <small>å°å…¥å¾Œ</small>
                <input id="monthsWith" type="number" placeholder="2">
            </div>
          </div>
        </div>

        <hr class="divider">

        <!-- é‡‘åˆ©ãƒ»ãƒªã‚¹ã‚¯ -->
        <div class="field">
          <label>å€Ÿå…¥é‡‘åˆ©ã¨ãƒªã‚¹ã‚¯</label>
          <div class="field-row">
            <div class="field">
               <small>å€Ÿå…¥æ®‹é«˜ (å††)</small>
               <input id="debtBalance" type="text" inputmode="numeric" placeholder="100,000,000" class="format-money">
            </div>
            <div class="field">
               <small>é‡‘åˆ©æ”¹å–„å¹… (%)</small>
               <input id="rateDiff" type="number" step="0.1" placeholder="0.2">
            </div>
          </div>
        </div>
        <div class="field" style="margin-top:8px;">
          <label>é‡å¤§ãƒªã‚¹ã‚¯ï¼ˆä¸æ­£ãƒ»è¿½å¾´ç­‰ï¼‰ã®å›é¿</label>
          <div class="field-row-3">
            <div class="field">
               <small>æå¤±é¡ (å††)</small>
               <input id="lossAmount" type="text" inputmode="numeric" placeholder="10,000,000" class="format-money">
            </div>
            <div class="field">
               <small>ç™ºç”Ÿç‡(æ—§)%</small>
               <input id="probBefore" type="number" step="0.1" placeholder="5.0">
            </div>
            <div class="field">
               <small>ç™ºç”Ÿç‡(æ–°)%</small>
               <input id="probAfter" type="number" step="0.1" placeholder="1.0">
            </div>
          </div>
        </div>

        <hr class="divider">

        <div class="field">
          <label for="annualCost">
            <span class="label-main">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè¨ˆã®å¹´é–“ã‚³ã‚¹ãƒˆ</span>
            <span class="unit">å††</span>
          </label>
          <input id="annualCost" type="text" inputmode="numeric" placeholder="1,500,000" class="format-money">
        </div>
      </div>

      <div class="actions">
        <button type="button" class="secondary" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>
        <button type="submit" class="primary">è©¦ç®—ã™ã‚‹</button>
      </div>
    </form>

    <!-- çµæœã‚¨ãƒªã‚¢ -->
    <div id="resultCard" class="card">
      <h2>è©¦ç®—çµæœ <span class="tag">Result</span></h2>
      <div id="results">
        <div class="result-main" style="padding: 40px 0; color: var(--muted);">
          å·¦å´ã®æ•°å€¤ã‚’å…¥åŠ›ã—ã¦<br>ã€Œè©¦ç®—ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
        </div>
      </div>
      <div class="note" style="margin-top:16px; text-align:center;">
        ğŸ‘† å„é …ç›®ã®ãƒ‘ãƒãƒ«ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€è¨ˆç®—å¼ã¨è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
      </div>
    </div>
  </div>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ (CC & Link) -->
  <footer class="mk-mini">
    Â© <span id="cpy-year">2025</span>
    <a href="https://www.matsumoto-kaikei.or.jp/" target="_blank" rel="noopener license">ç¨ç†å£«æ³•äººæ¾æœ¬ä¼šè¨ˆäº‹å‹™æ‰€</a> ï½œ 
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="license noopener">CC BY-NC-SA 4.0</a> ï½œ 
    <a href="/tool-portal/terms.html" target="_blank" rel="noopener">åˆ©ç”¨æ¡ä»¶</a> ï½œ 
    <span id="build-rev">v3.0</span>ï¼ˆ<span id="last-updated-date"></span>ï¼‰
  </footer>

</div>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ« (è§£èª¬ç”¨) -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title" id="modalTitle">ã‚¿ã‚¤ãƒˆãƒ«</div>
      <button class="close-btn" id="modalClose">&times;</button>
    </div>
    <div class="formula-box" id="modalFormula">è¨ˆç®—å¼</div>
    <div class="modal-desc" id="modalDesc">
      è§£èª¬ãƒ†ã‚­ã‚¹ãƒˆ
    </div>
  </div>
</div>

<!-- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ -->
<div id="toast" class="toast"></div>

<script>
  (function(){
    const STORAGE_KEY = "rt_sim_v3";
    const VERSION = "v3.0";
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«é–¢æ•°ã‚’å…¬é–‹ï¼ˆonclickã§å‘¼ã¶ãŸã‚ï¼‰
    window.resetAll = function(){
       if(confirm("å…¥åŠ›å†…å®¹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")){
           document.getElementById("simForm").reset();
           localStorage.removeItem(STORAGE_KEY);
           document.getElementById("results").innerHTML = '<div class="result-main" style="padding:40px 0;color:var(--muted);">å·¦å´ã®æ•°å€¤ã‚’å…¥åŠ›ã—ã¦<br>ã€Œè©¦ç®—ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</div>';
           currentResult = null;
           showToast("ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ");
       }
    };

    window.printPage = function(){
        if(!currentResult){
            alert("å…ˆã«è©¦ç®—ã‚’è¡Œã£ã¦ãã ã•ã„");
            return;
        }
        window.print();
    };

    window.copyResult = function(){
        if(!currentResult){
            alert("å…ˆã«è©¦ç®—ã‚’è¡Œã£ã¦ãã ã•ã„");
            return;
        }
        const r = currentResult;
        const text = [
            "ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè¨ˆ çµŒæ¸ˆä¾¡å€¤è©¦ç®—çµæœã€‘",
            `â–  å¹´é–“æœŸå¾…ãƒ¡ãƒªãƒƒãƒˆç·é¡: ${formatMoney(r.totalBenefit)} å††`,
            `   (å¯¾ã‚³ã‚¹ãƒˆåæ”¯: ${r.netBenefit>=0?'+':''}${formatCompact(r.netBenefit)} /å¹´)`,
            "",
            "â–  å†…è¨³",
            `1. CCCçŸ­ç¸®ãƒ»è³‡é‡‘ç¹°ã‚Šæ”¹å–„: ${formatMoney(r.benefitCCC)} å††`,
            `   (${r.cccDiff}æ—¥çŸ­ç¸® Ã— è³‡é‡‘ã‚³ã‚¹ãƒˆ${(r.fundingRate*100).toFixed(1)}%)`,
            `2. ç²—åˆ©æ‚ªåŒ–ã®æ—©æœŸæ¤œçŸ¥: ${formatMoney(r.benefitLoss)} å††`,
            `   (${r.monthsDiff}ãƒ¶æœˆæ—©æœŸåŒ–)`,
            `3. éŠ€è¡Œé‡‘åˆ©ã‚³ã‚¹ãƒˆé©æ­£åŒ–: ${formatMoney(r.benefitInterest)} å††`,
            `   (é‡‘åˆ© ${(r.rateDiff*100).toFixed(2)}% æ”¹å–„æƒ³å®š)`,
            `4. ãƒªã‚¹ã‚¯å›é¿(æœŸå¾…å€¤): ${formatMoney(r.benefitRisk)} å††`,
            `   (ç™ºç”Ÿç‡ ${(r.probDiff*100).toFixed(1)}%pt ä½ä¸‹)`,
            "",
            `â€»å¹´é–“ã‚³ã‚¹ãƒˆ: ${formatMoney(r.cost)} å††`,
            "--------------------------------------------------",
            "ç¨ç†å£«æ³•äººæ¾æœ¬ä¼šè¨ˆäº‹å‹™æ‰€ - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè¨ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼"
        ].join("\n");

        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text)
            .then(() => {
                showToast("çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
            })
            .catch(err => {
                console.warn("Clipboard API failed, trying execCommand fallback", err);
                fallbackCopyText(text);
            });
        } else {
            fallbackCopyText(text);
        }
    };
    
    function fallbackCopyText(text) {
        try {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            textArea.style.top = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            const successful = document.execCommand('copy');
            document.body.removeChild(textArea);
            
            if (successful) {
                showToast("çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
            } else {
                alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
            }
        } catch (err) {
            console.error("Fallback copy failed", err);
            alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
        }
    }

    // -------------------------------------------------------
    // ãƒ•ãƒƒã‚¿ãƒ¼åˆæœŸåŒ– (è‡ªå‹•æ—¥ä»˜æ›´æ–°)
    // -------------------------------------------------------
    function initFooter(){
        var y=new Date().getFullYear();
        var cpy=document.getElementById('cpy-year');
        if(cpy) cpy.textContent=String(y);
        
        var d;
        try{d=new Date(document.lastModified)}catch(_){d=new Date()}
        if(!(d instanceof Date)||isNaN(d.getTime())) d=new Date();
        
        var iso=new Date(d.getTime()-d.getTimezoneOffset()*60000).toISOString().slice(0,10);
        var lu=document.getElementById('last-updated-date');
        if(lu) lu.textContent=iso;
        var br=document.getElementById('build-rev');
        if(br) br.textContent=VERSION;
    }

    // -------------------------------------------------------
    // ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢é€£é–¢æ•°
    // -------------------------------------------------------
    function parseMoney(val){
      if(!val) return 0;
      const s = String(val).replace(/,/g, '').trim();
      const n = parseFloat(s);
      return isNaN(n) ? 0 : n;
    }
    function formatMoney(num){
      if(!isFinite(num)) return "";
      return Math.round(num).toLocaleString('ja-JP');
    }
    function formatCompact(num){
      if(num >= 100000000) return (num/100000000).toFixed(1) + "å„„";
      if(num >= 10000) return (num/10000).toFixed(0) + "ä¸‡";
      return num.toLocaleString('ja-JP');
    }

    // inputã‚¤ãƒ™ãƒ³ãƒˆã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ã‚«ãƒ³ãƒã‚’å…¥ã‚Œã‚‹å‡¦ç†
    function attachMoneyFormatter(){
      const inputs = document.querySelectorAll('.format-money');
      inputs.forEach(input => {
        input.addEventListener('input', function(e){
          const originalVal = this.value;
          const raw = originalVal.replace(/[^0-9.]/g, '');
          if(raw === "") {
             this.value = "";
             return;
          }
          const num = parseFloat(raw);
          if(!isNaN(num)){
            const formatted = num.toLocaleString('ja-JP');
            if(originalVal !== formatted){
                this.value = formatted;
            }
          }
        });
        input.addEventListener('blur', function(){
            const n = parseMoney(this.value);
            if(n > 0) this.value = n.toLocaleString('ja-JP');
        });
      });
    }

    function showToast(msg){
        const el = document.getElementById("toast");
        el.textContent = msg;
        el.classList.add("show");
        setTimeout(()=>{ el.classList.remove("show"); }, 3000);
    }

    // -------------------------------------------------------
    // è¨ˆç®— & è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
    // -------------------------------------------------------

    function getVal(id){
      const el = document.getElementById(id);
      if(!el) return 0;
      if(el.classList.contains('format-money')){
        return parseMoney(el.value);
      }
      return parseFloat(el.value) || 0;
    }
    
    let currentResult = null;

    function calculate(){
      const sales = getVal("sales");
      const marginBase = getVal("marginBase") / 100;
      const cogs = sales * (1 - marginBase);

      const cccCurrent = getVal("cccCurrent");
      const cccTarget = getVal("cccTarget");
      const cccDiff = Math.max(0, cccCurrent - cccTarget);
      const fundingRate = getVal("fundingRate") / 100;
      const wcReduction = (cogs / 365) * cccDiff; 
      const benefitCCC = wcReduction * fundingRate;

      const marginWorse = getVal("marginWorse") / 100;
      const monthsDiff = Math.max(0, getVal("monthsWithout") - getVal("monthsWith"));
      const marginDrop = Math.max(0, marginBase - marginWorse);
      const benefitLoss = sales * marginDrop * (monthsDiff / 12);

      const debt = getVal("debtBalance");
      const rateDiff = getVal("rateDiff") / 100;
      const benefitInterest = debt * rateDiff;

      const lossAmt = getVal("lossAmount");
      const probDiff = Math.max(0, getVal("probBefore") - getVal("probAfter")) / 100;
      const benefitRisk = lossAmt * probDiff;

      const totalBenefit = benefitCCC + benefitLoss + benefitInterest + benefitRisk;
      const cost = getVal("annualCost");
      const netBenefit = totalBenefit - cost;

      const result = {
        sales, cogs, cccDiff, fundingRate, wcReduction, benefitCCC,
        monthsDiff, marginDrop, benefitLoss,
        debt, rateDiff, benefitInterest,
        lossAmt, probDiff, benefitRisk,
        totalBenefit, cost, netBenefit
      };
      
      currentResult = result;
      render(result);
      saveState();
    }

    function render(r){
      const container = document.getElementById("results");
      const maxVal = Math.max(r.benefitCCC, r.benefitLoss, r.benefitInterest, r.benefitRisk, 1);
      
      const getH = (v) => Math.max(4, (v/maxVal)*90) + "%";

      container.innerHTML = `
        <div class="result-main">
          <div class="result-sub">å¹´é–“æœŸå¾…ãƒ¡ãƒªãƒƒãƒˆç·é¡</div>
          <div class="result-total">${formatMoney(r.totalBenefit)} å††</div>
          <div class="result-sub" style="color:${r.netBenefit>=0?'var(--accent)':'var(--danger)'}">
            (ã‚³ã‚¹ãƒˆå·®å¼•å¾Œ: ${r.netBenefit>=0?'+':''}${formatCompact(r.netBenefit)})
          </div>
        </div>

        <div class="chart">
          <div class="chart-col">
            <div class="chart-bar-wrapper"><div class="chart-bar" style="height:${getH(r.benefitCCC)}"><span class="bar-val">${formatCompact(r.benefitCCC)}</span></div></div>
            <div class="chart-label">é‹è»¢è³‡é‡‘<br>åŠ¹æœ</div>
          </div>
          <div class="chart-col">
            <div class="chart-bar-wrapper"><div class="chart-bar" style="height:${getH(r.benefitLoss)}"><span class="bar-val">${formatCompact(r.benefitLoss)}</span></div></div>
            <div class="chart-label">é€¸å¤±åˆ©ç›Š<br>é˜²æ­¢</div>
          </div>
          <div class="chart-col">
            <div class="chart-bar-wrapper"><div class="chart-bar" style="height:${getH(r.benefitInterest)}"><span class="bar-val">${formatCompact(r.benefitInterest)}</span></div></div>
            <div class="chart-label">é‡‘åˆ©æ˜¯æ­£<br>åŠ¹æœ</div>
          </div>
          <div class="chart-col">
            <div class="chart-bar-wrapper"><div class="chart-bar" style="height:${getH(r.benefitRisk)}"><span class="bar-val">${formatCompact(r.benefitRisk)}</span></div></div>
            <div class="chart-label">ãƒªã‚¹ã‚¯<br>å›é¿</div>
          </div>
        </div>

        <div class="result-grid">
          <div class="result-card" onclick="showModal('ccc')">
            <h3>CCCãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼</h3>
            <div class="val-main">${formatMoney(r.benefitCCC)} <small>å††</small></div>
            <div class="val-sub">${r.cccDiff.toFixed(0)}æ—¥çŸ­ç¸® Ã— ${formatCompact(r.wcReduction)}å††å‰Šæ¸›</div>
          </div>
          <div class="result-card" onclick="showModal('loss')">
            <h3>ç²—åˆ©æ‚ªåŒ–ã®æ—©æœŸæ¤œçŸ¥</h3>
            <div class="val-main">${formatMoney(r.benefitLoss)} <small>å††</small></div>
            <div class="val-sub">${r.monthsDiff.toFixed(1)}ãƒ¶æœˆæ—©æœŸåŒ–ã«ã‚ˆã‚‹é˜²æ­¢</div>
          </div>
          <div class="result-card" onclick="showModal('interest')">
            <h3>éŠ€è¡Œé‡‘åˆ©ã‚³ã‚¹ãƒˆé©æ­£åŒ–</h3>
            <div class="val-main">${formatMoney(r.benefitInterest)} <small>å††</small></div>
            <div class="val-sub">é‡‘åˆ© ${(r.rateDiff*100).toFixed(2)}% æ”¹å–„æƒ³å®š</div>
          </div>
          <div class="result-card" onclick="showModal('risk')">
            <h3>ãƒªã‚¹ã‚¯æœŸå¾…å€¤ã®ä½æ¸›</h3>
            <div class="val-main">${formatMoney(r.benefitRisk)} <small>å††</small></div>
            <div class="val-sub">ç™ºç”Ÿç‡ ${(r.probDiff*100).toFixed(1)}%pt ä½ä¸‹</div>
          </div>
        </div>

        <div class="result-footer">
          <div class="result-footer-row">
             <span>å°å…¥ãƒ»ç¶­æŒã‚³ã‚¹ãƒˆ</span>
             <strong>${formatMoney(r.cost)} å††</strong>
          </div>
          <div class="result-footer-row">
             <span>æŠ•è³‡å¯¾åŠ¹æœ (ROI)</span>
             <strong>${r.cost > 0 ? ((r.netBenefit/r.cost)*100).toFixed(1) + "%" : "-"}</strong>
          </div>
        </div>

        <div class="btn-group">
            <button type="button" class="btn-simple" onclick="copyResult()">ã‚³ãƒ”ãƒ¼</button>
            <button type="button" class="btn-simple" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>
            <button type="button" class="btn-simple btn-print" onclick="printPage()">å°åˆ· / PDFä¿å­˜</button>
        </div>
      `;
      
      if(window.innerWidth < 900){
        document.getElementById("resultCard").scrollIntoView({behavior:"smooth", block:"start"});
      }
    }

    // -------------------------------------------------------
    // ãƒ¢ãƒ¼ãƒ€ãƒ« (è§£èª¬)
    // -------------------------------------------------------
    window.showModal = function(type){
      if(!currentResult) return;
      
      const overlay = document.getElementById("modalOverlay");
      const titleEl = document.getElementById("modalTitle");
      const formEl = document.getElementById("modalFormula");
      const descEl = document.getElementById("modalDesc");
      const r = currentResult;
      
      if(type === 'ccc'){
        titleEl.innerText = "â‘  CCCçŸ­ç¸®ã«ã‚ˆã‚‹é‡‘åˆ©å‰Šæ¸›åŠ¹æœ";
        formEl.innerText = `(å£²ä¸ŠåŸä¾¡ Ã· 365) Ã— çŸ­ç¸®æ—¥æ•° Ã— è³‡é‡‘ã‚³ã‚¹ãƒˆç‡\n\n= (${formatCompact(r.cogs)} Ã· 365) Ã— ${r.cccDiff}æ—¥ Ã— ${(r.fundingRate*100).toFixed(1)}%`;
        descEl.innerHTML = `
          <p><strong>è€ƒãˆæ–¹ï¼š</strong><br>åœ¨åº«ã‚„å£²æ›é‡‘ã¨ã—ã¦ã€Œå¯ã¦ã„ã‚‹ç¾é‡‘ï¼ˆé‹è»¢è³‡é‡‘ï¼‰ã€ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã€ãã®ãŠé‡‘ã«ã‹ã‹ã£ã¦ã„ã‚‹é‡‘åˆ©ã‚³ã‚¹ãƒˆï¼ˆã¾ãŸã¯æŠ•è³‡ã§ããŸã¯ãšã®æ©Ÿä¼šè²»ç”¨ï¼‰ã‚’å‰Šæ¸›ã§ãã¾ã™ã€‚</p>
          <p>CCCãŒ ${r.cccDiff}æ—¥ çŸ­ç¸®ã•ã‚Œã‚‹ã¨ã€æ‰‹å…ƒã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒ <strong>${formatCompact(r.wcReduction)}å††</strong> å¢—ãˆã‚‹è¨ˆç®—ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã«å¯¾ã™ã‚‹é‡‘åˆ©åˆ†ãŒãƒ¡ãƒªãƒƒãƒˆã¨ãªã‚Šã¾ã™ã€‚</p>
        `;
      } else if(type === 'loss'){
        titleEl.innerText = "â‘¡ ç²—åˆ©æ‚ªåŒ–ã®æ—©æœŸæ¤œçŸ¥ãƒ»é˜²æ­¢";
        formEl.innerText = `å¹´é–“å£²ä¸Š Ã— (å¹³å¸¸ç²—åˆ©ç‡ - æ‚ªåŒ–ç²—åˆ©ç‡) Ã— (çŸ­ç¸®æœˆæ•° Ã· 12)\n\n= ${formatCompact(r.sales)} Ã— ${(r.marginDrop*100).toFixed(1)}% Ã— (${r.monthsDiff}ãƒ¶æœˆ Ã· 12)`;
        descEl.innerHTML = `
          <p><strong>è€ƒãˆæ–¹ï¼š</strong><br>åŸä¾¡é«˜é¨°ã‚„ä¸æ­£ãªå€¤å¼•ãã«ã‚ˆã‚Šåˆ©ç›Šç‡ãŒè½ã¡ãŸéš›ã€å¹´ä¸€å›ã®æ±ºç®—ã§æ°—ã¥ãã®ã¨ã€æ¯æœˆã®æœˆæ¬¡æ±ºç®—ã§æ°—ã¥ãã®ã¨ã§ã¯ã€å¯¾ç­–ã¾ã§ã®ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚</p>
          <p>ç•°å¸¸çŠ¶æ…‹ã‚’ <strong>${r.monthsDiff}ãƒ¶æœˆ</strong> æ—©ãè¦‹ã¤ã‘ã¦æ˜¯æ­£ã™ã‚‹ã“ã¨ã§ã€ãã®æœŸé–“ã«å¤±ã‚ã‚Œã‚‹ã¯ãšã ã£ãŸåˆ©ç›Šã‚’å®ˆã£ãŸã¨è€ƒãˆã¾ã™ã€‚</p>
        `;
      } else if(type === 'interest'){
        titleEl.innerText = "â‘¢ éŠ€è¡Œé‡‘åˆ©ã‚³ã‚¹ãƒˆã®é©æ­£åŒ–";
        formEl.innerText = `å€Ÿå…¥æ®‹é«˜ Ã— é‡‘åˆ©æ”¹å–„å¹…\n\n= ${formatCompact(r.debt)} Ã— ${(r.rateDiff*100).toFixed(2)}%`;
        descEl.innerHTML = `
          <p><strong>è€ƒãˆæ–¹ï¼š</strong><br>æ­£ç¢ºãªè©¦ç®—è¡¨ï¼ˆæœˆæ¬¡æ±ºç®—æ›¸ï¼‰ã‚’å³åº§ã«éŠ€è¡Œã¸æå‡ºã§ãã‚‹ä½“åˆ¶ã¯ã€ä¼æ¥­ã®æ ¼ä»˜ã‘è©•ä¾¡ï¼ˆä¿¡ç”¨åŠ›ï¼‰ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚</p>
          <p>ã“ã‚Œã«ã‚ˆã‚Šã€å°†æ¥çš„ãªå€Ÿå…¥é‡‘åˆ©ã®å¼•ãä¸‹ã’ã‚„ã€æœ‰åˆ©ãªæ¡ä»¶ã§ã®èª¿é”ãŒå¯èƒ½ã«ãªã‚‹åŠ¹æœã‚’è©¦ç®—ã—ã¦ã„ã¾ã™ã€‚</p>
        `;
      } else if(type === 'risk'){
        titleEl.innerText = "â‘£ é‡å¤§ãƒªã‚¹ã‚¯ã®å›é¿ï¼ˆæœŸå¾…å€¤ï¼‰";
        formEl.innerText = `æå¤±é¡ Ã— (ç™ºç”Ÿç¢ºç‡Before - ç™ºç”Ÿç¢ºç‡After)\n\n= ${formatCompact(r.lossAmt)} Ã— ${(r.probDiff*100).toFixed(1)}%`;
        descEl.innerHTML = `
          <p><strong>è€ƒãˆæ–¹ï¼š</strong><br>æ¨ªé ˜ã€ä½¿ã„è¾¼ã¿ã€ç¨å‹™èª¿æŸ»ã§ã®è¿½å¾´èª²ç¨ãªã©ã€ã€Œæ»…å¤šã«èµ·ããªã„ãŒã€èµ·ããŸã‚‰è‡´å‘½çš„ã€ãªäº‹æ•…ã®ãƒªã‚¹ã‚¯ã‚’ç¢ºç‡è«–ï¼ˆæœŸå¾…å€¤ï¼‰ã§è¨ˆç®—ã—ã¾ã™ã€‚</p>
          <p>è‡ªè¨ˆåŒ–ã«ã‚ˆã‚Šç¤¾å†…ã®æ•°å­—ã¸ã®æ„è­˜ãŒé«˜ã¾ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®äº‹æ•…ãŒèµ·ãã‚‹ç¢ºç‡ã‚’ <strong>${(r.probDiff*100).toFixed(1)}%</strong> ä¸‹ã’ã‚‰ã‚ŒãŸã¨ã—ã¦ã®ä¾¡å€¤æ›ç®—ã§ã™ã€‚</p>
        `;
      }
      
      overlay.classList.add("active");
    };

    document.getElementById("modalClose").addEventListener("click", ()=>{
      document.getElementById("modalOverlay").classList.remove("active");
    });
    document.getElementById("modalOverlay").addEventListener("click", (e)=>{
      if(e.target === document.getElementById("modalOverlay")){
        document.getElementById("modalOverlay").classList.remove("active");
      }
    });

    // -------------------------------------------------------
    // ä¿å­˜ãƒ»èª­è¾¼ãƒ»åˆæœŸåŒ–
    // -------------------------------------------------------
    function saveState(){
      const inputs = document.querySelectorAll("input");
      const data = {};
      inputs.forEach(el => data[el.id] = el.value);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }
    
    function loadState(){
      try{
        const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
        if(data){
          Object.keys(data).forEach(k => {
            const el = document.getElementById(k);
            if(el) el.value = data[k];
          });
        }
      }catch(e){}
    }

    // Init
    initFooter(); // ãƒ•ãƒƒã‚¿ãƒ¼åˆæœŸåŒ–
    attachMoneyFormatter();
    loadState();
    
    document.getElementById("simForm").addEventListener("submit", (e)=>{
      e.preventDefault();
      calculate();
    });

  })();
</script>
</body>
</html>
